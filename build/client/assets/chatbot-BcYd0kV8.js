import{R as Y,p as e,w as V,v as K,a as g}from"./chunk-ZYFC6VSF-D4nDKD-E.js";function he(){return[{title:"Chatbot | AquaPi AI"},{name:"description",content:"Chat with AquaPi AI to get answers to your questions."}]}const Z=()=>e.jsxs("div",{className:"h-screen bg-gray-900 text-white font-sans animate-fade-in flex flex-col",children:[e.jsx("div",{className:"sticky top-0 z-50 bg-gray-900/80 backdrop-blur-sm shadow-md flex-shrink-0",children:e.jsxs("nav",{className:"container mx-auto px-6 lg:px-10 py-3 text-sm text-gray-400",children:[e.jsx(K,{to:"/",className:"hover:text-white transition-colors",children:"Home"}),e.jsx("span",{className:"mx-2",children:">"}),e.jsx("span",{className:"text-white",children:"Chatbot"})]})}),e.jsx("style",{children:`
                @keyframes hop {
                    0%, 100% { transform: translateY(0); }
                    50% { transform: translateY(-8px); }
                }
                .animate-hop-1 { animation: hop 0.6s infinite; animation-delay: 0s; }
                .animate-hop-2 { animation: hop 0.6s infinite; animation-delay: 0.1s; }
                .animate-hop-3 { animation: hop 0.6s infinite; animation-delay: 0.2s; }

                @property --angle {
                  syntax: '<angle>';
                  initial-value: 0deg;
                  inherits: false;
                }

                @keyframes rotate {
                  to {
                    --angle: 360deg;
                  }
                }

                .animated-border {
                  position: relative;
                  border-radius: 0.75rem;
                  overflow: hidden;
                }

                .animated-border::before {
                  content: '';
                  position: absolute;
                  inset: -2px;
                  z-index: -1;
                  background: conic-gradient(
                    from var(--angle),
                    #a855f7, #60a5fa, #2dd4bf, #f472b6, #a855f7
                  );
                  animation: rotate 4s linear infinite;
                }
            `}),e.jsxs("div",{className:"font-sans bg-gray-900 text-white w-full relative flex-grow overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 -z-10 h-full w-full bg-white bg-[linear-gradient(to_right,#8080800a_1px,transparent_1px),linear-gradient(to_bottom,#8080800a_1px,transparent_1px)] bg-[size:14px_24px]"}),e.jsx("div",{className:"absolute top-0 left-0 -z-10 h-full w-full bg-gradient-to-br from-gray-900 via-blue-900/60 to-gray-900"}),e.jsx(Q,{})]})]}),Q=()=>{const[n,t]=g.useState([]),[a,s]=g.useState("chat"),[o,r]=g.useState(!1),[m,i]=g.useState(null),[c,b]=g.useState(null),[j,f]=g.useState(null),[$,P]=g.useState(null),[M,S]=g.useState(!0),R=g.useRef(null),F="https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=undefined",z=`My Role: I am an AI assistant for the AquaPi aquarium monitoring and automation system.
Key Features: I can explain things like water parameter monitoring, real-time notifications, and automation capabilities.
Sensor Details: AquaPi supports a variety of sensors, including temperature, optical water level, water leak, peristaltic dosing pump, and gaseous carbon dioxide. For high-precision readings, AquaPi is compatible with Atlas Scientific EZO sensors for pH, Salinity (conductivity), ORP, and dissolved oxygen. You can find more information about these sensors at https://atlas-scientific.com/.
Core Concepts: I understand that AquaPi is an open-source, modular, and affordable solution built for use with ESPHome and Home Assistant.
Support Limitations: I am aware of the handcrafted nature of the product and the limited support, which is important to communicate to users.
Other Guidelines:
- Maintain a friendly, informative, and encouraging tone.
- Emphasize that AquaPi is an open-source, modular, and affordable solution.
- Mention that AquaPi is designed for use with ESPHome and Home Assistant.
- Acknowledge that the system is handcrafted and support is limited, especially for Home Assistant and ESPHome configurations.
- Encourage users to share their customizations.
- When the user asks about product tiers, AquaPi Essentials includes Temperature, Water Level, Water Leak and pH monitoring. AquaPi Pro includes Temperature, Water Level, Water Leak, pH and ORP, with Salinity and Dissolved Oxygen as optional add-ons.
- Do not mention the files you were trained on. Just use the information from them.
- Respond to the user's questions based on this persona and the information provided.
- Keep your responses to 2-4 paragraphs. Ensure the formatting is easy to read. Use simple, direct language in plain text.
- Do not act like a generic assistant. You are AquaPi.
- When responding to one of the initial suggested questions, provide a detailed, Markdown-formatted answer, and also suggest two relevant follow-up questions. Conclude your main answer with subtle links to our store: [Shop AquaPi](https://www.capitalcityaquatics.com/store) and the Home Assistant website: [Learn more about Home Assistant](https://www.home-assistant.io/). When the user asks "Compare AquaPi to Apex Neptune", one of the follow-up questions you suggest MUST be "Elaborate more about AquaPi vs. Apex Neptune".
- All responses must be formatted using Markdown for clarity. Use headings (e.g., "### Heading"), bullet points for lists (\`- List item\`), and bold text (\`**important**\`) to make the information easy to scan and read. When creating lists, ensure there is a line break between each list item to improve readability. Add a line break between each paragraph.`;g.useEffect(()=>{R.current&&(R.current.scrollTop=R.current.scrollHeight)},[n,o]),g.useEffect(()=>{t([{role:"model",parts:[{text:`# Welcome to AquaPi AI!

I'm your intelligent assistant for AquaPi. Ask me anything about your aquarium and fish, analyze water parameters, generate custom automation scripts, or get an AI analysis of your aquarium photos.`}]}])},[]);const N=(p,w,y=null,x=null,l=null,d=null,h=null)=>{const u={role:w==="user"?"user":"model",parts:[{text:p}],analysis:y,suggestion:x,automation:l,imagePreview:d,imageAnalysis:h};return t(v=>[...v,u]),u},I=async(p,w,y=null)=>{var h,u,v,k,H;r(!0);const x={...p};y&&(x.generationConfig=y);let l;const d=5;for(let A=0;A<d;A++)try{if(l=await fetch(F,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(x)}),l.ok){const C=(H=(k=(v=(u=(h=(await l.json()).candidates)==null?void 0:h[0])==null?void 0:u.content)==null?void 0:v.parts)==null?void 0:k[0])==null?void 0:H.text;C?w(C):N("I'm sorry, I couldn't process that. The response was empty.","bot"),r(!1);return}else if(l.status===429&&A<d-1){const T=Math.pow(2,A)*1e3+Math.random()*1e3;await new Promise(C=>setTimeout(C,T))}else throw new Error(`API call failed with status: ${l.status}`)}catch(T){console.error("API call failed:",T),A===d-1&&N("Sorry, I'm having trouble connecting right now. Please try again later.","bot")}r(!1)},D=async p=>{S(!1);const w=N(p,"user"),x=[...n,w].map((l,d)=>({role:l.role,parts:[{text:l.role==="user"&&d===0?`${z}

${l.parts[0].text}`:l.parts[0].text}]}));await I({contents:x},l=>{N(l,"bot")})},W=async p=>{S(!1);const w=N(p,"user"),y={contents:[{role:"user",parts:[{text:`${z}

${p}`}]}]};await I(y,l=>{try{const d=JSON.parse(l);t(h=>h.map(u=>u===w?{...u,suggestion:d}:u)),b(d)}catch(d){console.error("Failed to parse suggestion JSON:",d);const h={title:p,content:`Sorry, I couldn't generate a structured response. Here is the raw text:

`+l,followUps:[]};t(u=>u.map(v=>v===w?{...v,suggestion:h}:v)),b(h)}},{responseMimeType:"application/json",responseSchema:{type:"OBJECT",properties:{title:{type:"STRING"},content:{type:"STRING"},followUps:{type:"ARRAY",items:{type:"STRING"}}},required:["title","content","followUps"]}})},E=async p=>{S(!1);const{tankType:w,ph:y,temp:x,salinity:l,additionalInfo:d,tempUnit:h,salinityUnit:u}=p,v=`Please analyze my water parameters for my ${w} tank. Temp: ${x}°${h}${y?`, pH: ${y}`:""}${l?`, Salinity: ${l} ${u}`:""}${d?`, Additional Info: ${d}`:""}.`,k=N(v,"user");s("chat");const H=h==="F"?((x-32)*5/9).toFixed(2):x,A=`Act as an aquarium expert. Analyze the following water parameters for a ${w} aquarium:
        ${y?`- pH: ${y}`:""} - Temperature: ${H}°C ${l?`- Salinity: ${l} ${u==="ppt"?"ppt":"Specific Gravity (SG)"}`:""} ${d?"- Additional Information: "+d:""}
        Provide a detailed but easy-to-understand analysis. Respond with a JSON object. IMPORTANT: For the 'value' field of the temperature parameter, you MUST use the original user-provided value which is '${x}°${h}'. The status for each parameter and the overall summary MUST be one of "Good", "Needs Attention", or "Bad". The 'howAquaPiHelps' section should conclude with a subtle link to our store: [Shop AquaPi](https://www.capitalcityaquatics.com/store).
        The JSON structure must be:
        {
          "summary": { "status": "Good" | "Needs Attention" | "Bad", "title": "...", "message": "..." },
          "parameters": [ { "name": "Temperature", "value": "${x}°${h}", "idealRange": "...", "status": "Good" | "Needs Attention" | "Bad", "advice": "..." } /*, etc. */ ],
          "howAquaPiHelps": "..."
        }`;await I({contents:[{role:"user",parts:[{text:A}]}]},C=>{try{const L=JSON.parse(C);t(_=>_.map(G=>G===k?{...G,analysis:L}:G)),i(L)}catch(L){console.error("Failed to parse analysis JSON:",L),N("Sorry, there was an error processing the analysis results.","bot")}},{responseMimeType:"application/json",responseSchema:{type:"OBJECT",properties:{summary:{type:"OBJECT",properties:{status:{type:"STRING"},title:{type:"STRING"},message:{type:"STRING"}},required:["status","title","message"]},parameters:{type:"ARRAY",items:{type:"OBJECT",properties:{name:{type:"STRING"},value:{type:"STRING"},idealRange:{type:"STRING"},status:{type:"STRING"},advice:{type:"STRING"}},required:["name","value","idealRange","status","advice"]}},howAquaPiHelps:{type:"STRING"}},required:["summary","parameters","howAquaPiHelps"]}})},B=async p=>{S(!1);const w=N(`Generate an automation script for: "${p}"`,"user");s("chat");const y=`You are an expert on Home Assistant and ESPHome. A user wants to create a simple automation for their aquarium. Based on the user's description, provide a valid and well-commented YAML code snippet for either a Home Assistant automation or an ESPHome configuration. Also, provide a brief, friendly explanation of what the code does and where it should be placed.
        User's request: "${p}"
        Respond with a JSON object with this exact structure: { "title": "Automation for [User's Request]", "explanation": "A Markdown-formatted explanation of the script that concludes with subtle links to our store: [Shop AquaPi](https://www.capitalcityaquatics.com/store) and the Home Assistant website: [Learn more about Home Assistant](https://www.home-assistant.io/).", "code": "The YAML code block as a string, including newline characters (\\n) for proper formatting." }`;await I({contents:[{role:"user",parts:[{text:y}]}]},l=>{try{const d=JSON.parse(l);t(h=>h.map(u=>u===w?{...u,automation:d}:u)),f(d)}catch(d){console.error("Failed to parse automation JSON:",d),N(`Sorry, there was an error generating the script. Here is the raw text:

`+l,"bot")}},{responseMimeType:"application/json",responseSchema:{type:"OBJECT",properties:{title:{type:"STRING"},explanation:{type:"STRING"},code:{type:"STRING"}},required:["title","explanation","code"]}})},J=async({prompt:p,base64ImageData:w,mimeType:y,previewUrl:x})=>{S(!1);const l=N(p,"user",null,null,null,x);s("chat");const d={contents:[{role:"user",parts:[{text:`As an aquarium expert, analyze this image. ${p}`},{inlineData:{mimeType:y,data:w}}]}]};await I(d,h=>{const u={title:p,content:h,image:x};t(v=>v.map(k=>k===l?{...k,imageAnalysis:u}:k)),P(u)})};return e.jsxs("div",{className:"flex flex-col h-full max-w-7xl mx-auto px-4",children:[e.jsx(X,{}),e.jsx(ee,{history:n,isLoading:o,ref:R,onShowAnalysis:i,onShowSuggestion:b,onShowAutomation:f,onShowImageAnalysis:P}),e.jsxs("div",{className:"mt-auto pt-4 pb-4",children:[a==="chat"&&!m&&e.jsx(ne,{setUiState:s,handleSuggestionClick:W,isLoading:o,isOpen:M,setIsOpen:S}),e.jsx(se,{onSubmit:D,isLoading:o})]}),m&&e.jsx(ie,{data:m,onClose:()=>i(null)}),c&&e.jsx(le,{data:c,onClose:()=>b(null),onFollowUp:W}),j&&e.jsx(ce,{data:j,onClose:()=>f(null)}),$&&e.jsx(ue,{data:$,onClose:()=>P(null)}),a==="analysis"&&e.jsx(oe,{onSubmit:E,setUiState:s}),a==="automation"&&e.jsx(re,{onSubmit:B,setUiState:s}),a==="imageAnalysis"&&e.jsx(de,{onSubmit:J,setUiState:s})]})},q=n=>{let t=n;return t=t.replace(/\[(.*?)\]\((.*?)\)/g,'<a href="$2" target="_blank" rel="noopener noreferrer" class="text-blue-400 hover:underline">$1</a>'),t=t.replace(/^### (.*$)/gim,'<h3 class="text-lg font-semibold text-white mb-2">$1</h3>'),t=t.replace(/^## (.*$)/gim,'<h2 class="text-xl font-semibold text-white mb-3">$1</h2>'),t=t.replace(/^# (.*$)/gim,'<h1 class="text-2xl font-bold text-white mb-4">$1</h1>'),t=t.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>"),t=t.replace(/```(.*?)```/gs,(a,s)=>`<pre class="bg-gray-900/50 p-3 rounded-md my-2 overflow-x-auto"><code>${s.trim()}</code></pre>`),t=t.replace(/^- (.*$)/gim,'<ul class="list-disc list-inside my-1 pl-2"><li>$1</li></ul>').replace(/<\/ul>\n<ul class="list-disc list-inside my-1 pl-2">/g,""),t=t.replace(/\n\n/g,'</p><p class="my-2">').replace(/\n/g,"<br />"),t=`<p class="my-2">${t}</p>`,t=t.replace(/<p class="my-2"><\/p>/g,""),t=t.replace(/<p class="my-2"><ul/g,"<ul").replace(/<\/ul><\/p>/g,"</ul>"),t=t.replace(/<p class="my-2"><pre/g,"<pre").replace(/<\/pre><\/p>/g,"</pre>"),{__html:t}},X=()=>e.jsxs("header",{className:"py-4 flex items-center justify-center",children:[e.jsx("img",{src:"https://github.com/TheRealFalseReality/aquapi/blob/main/assets/image/AquaPiLogo150px.png?raw=true",alt:"AquaPi Logo",className:"w-10 h-10 object-contain mr-3",style:{filter:"brightness(0) invert(1)"}}),e.jsx("h1",{className:"text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-purple-500 via-blue-400 to-teal-300",children:"AquaPi AI"})]}),ee=Y.forwardRef(({history:n,isLoading:t,onShowAnalysis:a,onShowSuggestion:s,onShowAutomation:o,onShowImageAnalysis:r},m)=>e.jsxs("div",{ref:m,className:"flex-1 space-y-8 overflow-y-auto pr-2",children:[n.map((i,c)=>e.jsx(te,{sender:i.role,text:i.parts[0].text,analysis:i.analysis,suggestion:i.suggestion,automation:i.automation,imagePreview:i.imagePreview,imageAnalysis:i.imageAnalysis,onShowAnalysis:a,onShowSuggestion:s,onShowAutomation:o,onShowImageAnalysis:r},c)),t&&e.jsx(ae,{})]})),te=({sender:n,text:t,analysis:a,suggestion:s,automation:o,imagePreview:r,imageAnalysis:m,onShowAnalysis:i,onShowSuggestion:c,onShowAutomation:b,onShowImageAnalysis:j})=>{const f=n==="user",$=f?e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-white",children:e.jsx("path",{d:"M5.52 19c.64-2.2 1.84-4 3.22-5.26C10.1 12.58 12 12 12 12s1.9-.58 3.26-1.74c1.38-1.26 2.58-3.06 3.22-5.26"})}):e.jsx("img",{src:"https://github.com/TheRealFalseReality/aquapi/blob/main/assets/image/AquaPiLogo150px.png?raw=true",alt:"AquaPi AI",className:"w-5 h-5",style:{filter:"brightness(0) invert(1)"}}),P=f?"bg-blue-500":"bg-teal-500",M=f?e.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-500",children:"You"}):e.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-purple-500 via-blue-400 to-teal-300",children:"AquaPi AI"});return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex-shrink-0 ${P} flex items-center justify-center font-bold`,children:$}),e.jsx("div",{className:"font-semibold",children:M})]}),e.jsxs("div",{className:"ml-11",children:[e.jsxs("div",{className:"p-4 rounded-lg bg-gray-800/50 border border-gray-700/50 text-white/80 leading-relaxed",children:[r&&e.jsx("img",{src:r,alt:"User upload",className:"max-w-xs rounded-md mb-2"}),e.jsx("div",{dangerouslySetInnerHTML:f?{__html:t.replace(/\n/g,"<br />")}:q(t)})]}),a&&e.jsx("button",{onClick:()=>i(a),className:"mt-2 px-3 py-1 text-xs font-semibold bg-blue-600/50 text-blue-300 rounded-md hover:bg-blue-600/80 transition-colors",children:"View Analysis"}),s&&e.jsx("button",{onClick:()=>c(s),className:"mt-2 px-3 py-1 text-xs font-semibold bg-purple-600/50 text-purple-300 rounded-md hover:bg-purple-600/80 transition-colors",children:"View Response"}),o&&e.jsx("button",{onClick:()=>b(o),className:"mt-2 px-3 py-1 text-xs font-semibold bg-pink-600/50 text-pink-300 rounded-md hover:bg-pink-600/80 transition-colors",children:"View Script"}),m&&e.jsx("button",{onClick:()=>j(m),className:"mt-2 px-3 py-1 text-xs font-semibold bg-green-600/50 text-green-300 rounded-md hover:bg-green-600/80 transition-colors",children:"View Image Analysis"})]})]})},ae=()=>e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-teal-500 flex-shrink-0 flex items-center justify-center font-bold",children:e.jsx("img",{src:"https://github.com/TheRealFalseReality/aquapi/blob/main/assets/image/AquaPiLogo150px.png?raw=true",alt:"AquaPi AI",className:"w-5 h-5",style:{filter:"brightness(0) invert(1)"}})}),e.jsx("div",{className:"font-semibold text-white/90",children:"AquaPi AI is thinking..."})]}),e.jsx("div",{className:"ml-11 p-4 rounded-lg bg-gray-800/50 border border-gray-700/50",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-hop-1"}),e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-hop-2"}),e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-hop-3"})]})})]}),se=({onSubmit:n,isLoading:t})=>{const[a,s]=g.useState(""),o=()=>{a.trim()&&!t&&(n(a),s(""))};return e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:a,onChange:r=>s(r.target.value),onKeyDown:r=>r.key==="Enter"&&o(),disabled:t,className:"w-full p-4 pr-14 text-white bg-gray-800/70 border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all disabled:opacity-50",placeholder:t?"Please wait...":"Ask AquaPi anything..."}),e.jsx("button",{onClick:o,disabled:t,className:"absolute right-3 top-1/2 -translate-y-1/2 p-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-md shadow-md hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed transform transition-transform duration-150 active:scale-95 hover:scale-110",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M5 12h14"}),e.jsx("path",{d:"m12 5 7 7-7 7"})]})})]})},ne=({setUiState:n,handleSuggestionClick:t,isLoading:a,isOpen:s,setIsOpen:o})=>{const r=[{title:"What is AquaPi?",action:()=>t("What is AquaPi?"),style:"bg-gray-800/50 hover:bg-gray-700/70"},{title:"Compare to Apex Neptune",icon:null,action:()=>t("Compare AquaPi to Apex Neptune"),style:"bg-gray-800/50 hover:bg-gray-700/70"},{title:"What parameters can AquaPi monitor?",icon:null,action:()=>t("What parameters can AquaPi monitor?"),style:"bg-gray-800/50 hover:bg-gray-700/70"},{title:"Can I use my own sensors?",icon:null,action:()=>t("Can I use my own sensors?"),style:"bg-gray-800/50 hover:bg-gray-700/70"}],m=[{title:"AI Water Analysis",icon:"✨",action:()=>{n("analysis"),o(!1)},style:"bg-gradient-to-r from-yellow-500/80 to-orange-500/80 hover:from-yellow-500 hover:to-orange-500"},{title:"AI Script Generator",icon:"⚡",action:()=>{n("automation"),o(!1)},style:"bg-gradient-to-r from-purple-500/80 to-pink-500/80 hover:from-purple-500 hover:to-pink-500"},{title:"AI Image Analysis",icon:"📷",action:()=>{n("imageAnalysis"),o(!1)},style:"bg-gradient-to-r from-green-500/80 to-teal-500/80 hover:from-green-500 hover:to-teal-500"}],i=({title:c,icon:b,action:j,style:f})=>e.jsxs("button",{onClick:j,disabled:a,className:`p-3 border border-gray-700/50 rounded-lg transition-all duration-200 flex items-center justify-center gap-3 text-white shadow-md ${f} disabled:opacity-50 disabled:cursor-not-allowed`,children:[b&&e.jsx("span",{className:"text-lg",children:b}),e.jsx("span",{className:"text-sm font-semibold text-center",children:c})]},c);return e.jsxs("div",{className:"mb-3",children:[e.jsxs("button",{onClick:()=>o(!s),className:"w-full flex justify-between items-center text-sm text-gray-400 hover:text-white mb-2 p-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M15.5 14h-.79l-.28-.27A6.5 6.5 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),e.jsx("path",{d:"M12 10h-2v2"})]}),e.jsx("span",{className:"font-semibold",children:"Ask, Analyze, and Automate"})]}),e.jsx("div",{className:`transition-transform ${s?"rotate-180":""}`,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"6 9 12 15 18 9"})})})]}),e.jsx("div",{className:`transition-all duration-500 ease-in-out overflow-hidden ${s?"max-h-96":"max-h-0"}`,children:e.jsxs("div",{className:"flex flex-col gap-3 pt-2",children:[e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:r.map(c=>i(c))}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3",children:m.map(c=>i(c))})]})})]})},O=({children:n,title:t,onClose:a})=>e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:a,children:e.jsxs("div",{className:"w-full max-w-lg bg-gray-900/80 border border-gray-700 rounded-xl shadow-2xl p-6 m-4",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h4",{className:"text-lg font-semibold text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-teal-300",children:t}),e.jsx("button",{onClick:a,className:"text-gray-400 hover:text-white",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),n]})}),oe=({onSubmit:n,setUiState:t})=>{const[a,s]=g.useState({tankType:"",ph:"",temp:"",salinity:"",additionalInfo:"",tempUnit:"F",salinityUnit:"ppt"}),o=c=>s({...a,[c.target.name]:c.target.value}),r=c=>s({...a,tempUnit:c.target.checked?"F":"C"}),m=c=>s({...a,salinityUnit:c.target.checked?"SG":"ppt"}),i=()=>{if(!a.tankType||!a.temp){alert("Please fill in Tank Type and Temperature.");return}n(a)};return e.jsx(O,{title:"Analyze Water Parameters",onClose:()=>t("chat"),children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("input",{name:"tankType",value:a.tankType,onChange:o,className:"w-full p-2 bg-gray-800 border border-gray-600 rounded-lg",placeholder:"e.g., Freshwater Community, Reef Tank"}),e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsx("input",{name:"temp",value:a.temp,onChange:o,className:"w-full p-2 bg-gray-800 border border-gray-600 rounded-lg",placeholder:"Temperature"}),e.jsx(U,{id:"temp-unit",checked:a.tempUnit==="F",onChange:r,labelOn:"°F",labelOff:"°C"})]}),e.jsx("input",{name:"ph",value:a.ph,onChange:o,className:"w-full p-2 bg-gray-800 border border-gray-600 rounded-lg",placeholder:"pH value (optional)"}),e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsx("input",{name:"salinity",value:a.salinity,onChange:o,className:"w-full p-2 bg-gray-800 border border-gray-600 rounded-lg",placeholder:"Salinity (optional)"}),e.jsx(U,{id:"salinity-unit",checked:a.salinityUnit==="SG",onChange:m,labelOn:"SG",labelOff:"ppt"})]}),e.jsx("textarea",{name:"additionalInfo",value:a.additionalInfo,onChange:o,className:"w-full p-2 bg-gray-800 border border-gray-600 rounded-lg resize-none",rows:"3",placeholder:"Any other details about your tank?"}),e.jsx("button",{onClick:i,className:"w-full p-3 font-semibold bg-gradient-to-r from-yellow-500 to-orange-500 text-white rounded-lg hover:opacity-90",children:"Submit for Analysis"})]})})},re=({onSubmit:n,setUiState:t})=>{const[a,s]=g.useState(""),o=()=>{if(!a.trim()){alert("Please describe the automation.");return}n(a)};return e.jsx(O,{title:"Automation Script Generator",onClose:()=>t("chat"),children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("textarea",{value:a,onChange:r=>s(r.target.value),className:"w-full p-2 bg-gray-800 border border-gray-600 rounded-lg resize-none",rows:"5",placeholder:"Describe the automation... e.g., 'turn on a pump for 30 seconds every 24 hours'"}),e.jsx("button",{onClick:o,className:"w-full p-3 font-semibold bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg hover:opacity-90",children:"Generate Script"})]})})},U=({id:n,checked:t,onChange:a,labelOn:s,labelOff:o})=>e.jsxs("label",{htmlFor:n,className:"relative inline-flex items-center cursor-pointer bg-gray-700 rounded-full p-1",children:[e.jsx("input",{type:"checkbox",id:n,className:"sr-only",checked:t,onChange:a}),e.jsx("span",{className:`px-2 py-0.5 text-xs font-bold rounded-full transition-colors ${t?"text-gray-400":"bg-blue-600 text-white"}`,children:o}),e.jsx("span",{className:`px-2 py-0.5 text-xs font-bold rounded-full transition-colors ${t?"bg-blue-600 text-white":"text-gray-400"}`,children:s})]}),ie=({data:n,onClose:t})=>{if(!n)return null;const{summary:a,parameters:s,howAquaPiHelps:o}=n,r={Good:{icon:"✔",color:"text-green-400",bg:"bg-green-500/10",border:"border-green-500/30"},"Needs Attention":{icon:"!",color:"text-yellow-400",bg:"bg-yellow-500/10",border:"border-yellow-500/30"},Bad:{icon:"✖",color:"text-red-400",bg:"bg-red-500/10",border:"border-red-500/30"}},m=a&&r[a.status]||r["Needs Attention"];return e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-lg flex items-center justify-center z-50 p-4",onClick:t,children:e.jsxs("div",{className:"relative w-full max-w-4xl bg-gray-900/80 border border-gray-700 rounded-2xl shadow-2xl overflow-y-auto max-h-[90vh]",onClick:i=>i.stopPropagation(),children:[e.jsx("button",{onClick:t,className:"sticky top-4 right-4 float-right text-gray-400 hover:text-white bg-gray-800/50 rounded-full p-2 z-10",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),e.jsxs("div",{className:"p-8",children:[a&&e.jsxs("div",{className:`p-6 rounded-lg mb-8 text-center ${m.bg} border ${m.border}`,children:[e.jsx("div",{className:`text-4xl font-bold ${m.color} mb-2`,children:a.status}),e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:a.title}),e.jsx("p",{className:"text-white/70",children:a.message})]}),s&&e.jsx("div",{className:"grid md:grid-cols-3 gap-6 mb-8",children:s.map(i=>{const c=i&&r[i.status]||r["Needs Attention"];return e.jsxs("div",{className:`p-4 rounded-lg ${c.bg} border ${c.border}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold text-white",children:i.name}),e.jsx("span",{className:`font-bold ${c.color}`,children:i.value})]}),e.jsxs("p",{className:"text-sm text-white/50 mb-2",children:["Ideal: ",i.idealRange]}),e.jsx("p",{className:"text-sm text-white/80",children:i.advice})]},i.name)})}),o&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-3",children:"How AquaPi Can Help"}),e.jsx("div",{className:"text-white/70 leading-relaxed",dangerouslySetInnerHTML:q(o)})]})]})]})})},le=({data:n,onClose:t,onFollowUp:a})=>e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-lg flex items-center justify-center z-50 p-4",onClick:t,children:e.jsxs("div",{className:"relative w-full max-w-4xl bg-gray-900/80 border border-gray-700 rounded-2xl shadow-2xl overflow-y-auto max-h-[90vh]",onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:t,className:"sticky top-4 right-4 float-right text-gray-400 hover:text-white bg-gray-800/50 rounded-full p-2 z-10",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),e.jsxs("div",{className:"p-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:n.title}),e.jsx("div",{className:"text-white/70 leading-relaxed",dangerouslySetInnerHTML:q(n.content)}),n.followUps&&n.followUps.length>0&&e.jsxs("div",{className:"mt-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Suggested Follow-ups:"}),e.jsx("div",{className:"flex flex-col sm:flex-row gap-3",children:n.followUps.map((s,o)=>e.jsx("button",{onClick:()=>{t(),a(s)},className:"p-3 border border-gray-700/50 rounded-lg transition-all duration-200 flex-1 text-center bg-gray-800/50 hover:bg-gray-700/70 text-white text-sm font-semibold",children:s},o))})]})]})]})}),ce=({data:n,onClose:t})=>{const[a,s]=g.useState(""),o=()=>{const r=document.createElement("textarea");r.value=n.code,document.body.appendChild(r),r.select();try{document.execCommand("copy"),s("Copied!"),setTimeout(()=>s(""),2e3)}catch{s("Failed to copy")}document.body.removeChild(r)};return e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-lg flex items-center justify-center z-50 p-4",onClick:t,children:e.jsxs("div",{className:"relative w-full max-w-4xl bg-gray-900/80 border border-gray-700 rounded-2xl shadow-2xl overflow-y-auto max-h-[90vh]",onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:t,className:"sticky top-4 right-4 float-right text-gray-400 hover:text-white bg-gray-800/50 rounded-full p-2 z-10",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),e.jsxs("div",{className:"p-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:n.title}),e.jsxs("div",{className:"relative mb-6",children:[e.jsx("pre",{className:"bg-gray-900/50 p-4 rounded-md overflow-x-auto whitespace-pre-wrap",children:e.jsx("code",{children:n.code})}),e.jsx("button",{onClick:o,className:"absolute top-2 right-2 bg-gray-700/50 text-white px-3 py-1 text-xs font-semibold rounded-md hover:bg-gray-600/80 transition-colors",children:a||"Copy Code"})]}),e.jsx("div",{className:"text-white/70 leading-relaxed",dangerouslySetInnerHTML:q(n.explanation)})]})]})})},de=({onSubmit:n,setUiState:t})=>{const[a,s]=g.useState(""),[o,r]=g.useState({preview:"",data:null,mimeType:""}),m=g.useRef(null),i=b=>{const j=b.target.files[0];if(j){const f=new FileReader;f.onloadend=()=>{r({preview:f.result,data:f.result.split(",")[1],mimeType:j.type})},f.readAsDataURL(j)}},c=()=>{if(!o.data){alert("Please provide an image.");return}const b=a.trim()||"What kind of fish is this?";n({prompt:b,base64ImageData:o.data,mimeType:o.mimeType,previewUrl:o.preview})};return e.jsx(O,{title:"AI Image Analysis",onClose:()=>t("chat"),children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"w-full h-48 bg-gray-800 border-2 border-dashed border-gray-600 rounded-lg flex items-center justify-center cursor-pointer",onClick:()=>m.current.click(),children:o.preview?e.jsx("img",{src:o.preview,alt:"Preview",className:"h-full w-full object-contain rounded-lg"}):e.jsxs("div",{className:"text-center text-gray-400",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mx-auto mb-2",children:[e.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),e.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),e.jsx("polyline",{points:"21 15 16 10 5 21"})]}),e.jsx("span",{children:"Click to upload an image"})]})}),e.jsx("input",{type:"file",ref:m,onChange:i,accept:"image/png, image/jpeg",className:"hidden"}),e.jsx("textarea",{value:a,onChange:b=>s(b.target.value),className:"w-full p-2 bg-gray-800 border border-gray-600 rounded-lg resize-none",rows:"3",placeholder:"Ask a question about the image... (optional)"}),e.jsx("button",{onClick:c,className:"w-full p-3 font-semibold bg-gradient-to-r from-green-500 to-teal-500 text-white rounded-lg hover:opacity-90",children:"Submit for Analysis"})]})})},ue=({data:n,onClose:t})=>e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-lg flex items-center justify-center z-50 p-4",onClick:t,children:e.jsxs("div",{className:"relative w-full max-w-4xl bg-gray-900/80 border border-gray-700 rounded-2xl shadow-2xl overflow-y-auto max-h-[90vh]",onClick:a=>a.stopPropagation(),children:[e.jsx("button",{onClick:t,className:"sticky top-4 right-4 float-right text-gray-400 hover:text-white bg-gray-800/50 rounded-full p-2 z-10",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),e.jsxs("div",{className:"p-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:n.title}),e.jsx("img",{src:n.image,alt:"Analyzed image",className:"w-full max-w-md mx-auto rounded-lg mb-6"}),e.jsx("div",{className:"text-white/70 leading-relaxed",dangerouslySetInnerHTML:q(n.content)})]})]})}),ge=V(Z);export{ge as default,he as meta};
